{"ast":null,"code":"// @ts-check\n\n/**\n * @param {string} target\n */\nexport default function getEventManager(target) {\n  /**\n   * @type {Record<string, Record<string, ((e: any) => void)[]>>}\n   */\n  const listeners = {};\n  /**\n   * @param {string} type\n   * @param {() => void} callback\n   */\n\n  const removeListener = (type, callback) => {\n    const callbacks = listeners[type] ? listeners[type][target] : undefined;\n\n    if (!callbacks) {\n      return;\n    }\n\n    const index = callbacks.indexOf(callback);\n    callbacks.splice(index, 1);\n  };\n  /**\n   * @param {string} type\n   * @param {() => void} callback\n   */\n\n\n  const addListener = (type, callback) => {\n    listeners[type] = listeners[type] || {};\n    listeners[type][target] = listeners[type][target] || [];\n    listeners[type][target].push(callback);\n    return {\n      remove: () => removeListener(type, callback)\n    };\n  };\n\n  return {\n    addListener,\n\n    /**\n     * @param {string} type\n     * @param {any} [data]\n     */\n    emit: (type, data) => {\n      const items = listeners[type] || {};\n      /**\n       * Copy the current list of callbacks in case they are mutated during execution\n       * @type {((data: any) => void)[] | undefined}\n       */\n\n      const callbacks = items[target] && items[target].slice();\n      callbacks === null || callbacks === void 0 ? void 0 : callbacks.forEach(cb => cb(data));\n    }\n  };\n}","map":{"version":3,"sources":["getEventManager.js"],"names":["listeners","removeListener","callbacks","index","addListener","remove","emit","items","cb"],"mappings":"AAAA;;AAEA;;;AAGA,eAAe,SAAA,eAAA,CAAA,MAAA,EAAiC;AAC9C;;;AAGA,QAAMA,SAAS,GAAf,EAAA;AAEA;;;;;AAIA,QAAMC,cAAc,GAAG,CAAA,IAAA,EAAA,QAAA,KAAoB;AACzC,UAAMC,SAAS,GAAGF,SAAS,CAATA,IAAS,CAATA,GAAkBA,SAAS,CAATA,IAAS,CAATA,CAAlBA,MAAkBA,CAAlBA,GAAlB,SAAA;;AAEA,QAAI,CAAJ,SAAA,EAAgB;AACd;AACD;;AAED,UAAMG,KAAK,GAAGD,SAAS,CAATA,OAAAA,CAAd,QAAcA,CAAd;AAEAA,IAAAA,SAAS,CAATA,MAAAA,CAAAA,KAAAA,EAAAA,CAAAA;AATF,GAAA;AAYA;;;;;;AAIA,QAAME,WAAW,GAAG,CAAA,IAAA,EAAA,QAAA,KAAoB;AACtCJ,IAAAA,SAAS,CAATA,IAAS,CAATA,GAAkBA,SAAS,CAATA,IAAS,CAATA,IAAlBA,EAAAA;AACAA,IAAAA,SAAS,CAATA,IAAS,CAATA,CAAAA,MAAAA,IAA0BA,SAAS,CAATA,IAAS,CAATA,CAAAA,MAAAA,KAA1BA,EAAAA;AACAA,IAAAA,SAAS,CAATA,IAAS,CAATA,CAAAA,MAAAA,EAAAA,IAAAA,CAAAA,QAAAA;AAEA,WAAO;AACLK,MAAAA,MAAM,EAAE,MAAMJ,cAAc,CAAA,IAAA,EAAA,QAAA;AADvB,KAAP;AALF,GAAA;;AAUA,SAAO;AAAA,IAAA,WAAA;;AAGL;;;;AAIAK,IAAAA,IAAI,EAAE,CAAA,IAAA,EAAA,IAAA,KAAgB;AACpB,YAAMC,KAAK,GAAGP,SAAS,CAATA,IAAS,CAATA,IAAd,EAAA;AAEA;;;;;AAIA,YAAME,SAAS,GAAGK,KAAK,CAALA,MAAK,CAALA,IAAiBA,KAAK,CAALA,MAAK,CAALA,CAAnC,KAAmCA,EAAnC;AAEAL,MAAAA,SAAS,KAATA,IAAAA,IAAAA,SAAS,KAAA,KAATA,CAAAA,GAAAA,KAAAA,CAAAA,GAAAA,SAAS,CAATA,OAAAA,CAAoBM,EAAD,IAAQA,EAAE,CAA7BN,IAA6B,CAA7BA,CAAAA;AACD;AAjBI,GAAP;AAmBD","sourcesContent":["// @ts-check\n\n/**\n * @param {string} target\n */\nexport default function getEventManager(target) {\n  /**\n   * @type {Record<string, Record<string, ((e: any) => void)[]>>}\n   */\n  const listeners = {};\n\n  /**\n   * @param {string} type\n   * @param {() => void} callback\n   */\n  const removeListener = (type, callback) => {\n    const callbacks = listeners[type] ? listeners[type][target] : undefined;\n\n    if (!callbacks) {\n      return;\n    }\n\n    const index = callbacks.indexOf(callback);\n\n    callbacks.splice(index, 1);\n  };\n\n  /**\n   * @param {string} type\n   * @param {() => void} callback\n   */\n  const addListener = (type, callback) => {\n    listeners[type] = listeners[type] || {};\n    listeners[type][target] = listeners[type][target] || [];\n    listeners[type][target].push(callback);\n\n    return {\n      remove: () => removeListener(type, callback),\n    };\n  };\n\n  return {\n    addListener,\n\n    /**\n     * @param {string} type\n     * @param {any} [data]\n     */\n    emit: (type, data) => {\n      const items = listeners[type] || {};\n\n      /**\n       * Copy the current list of callbacks in case they are mutated during execution\n       * @type {((data: any) => void)[] | undefined}\n       */\n      const callbacks = items[target] && items[target].slice();\n\n      callbacks?.forEach((cb) => cb(data));\n    },\n  };\n}\n"]},"metadata":{},"sourceType":"module"}